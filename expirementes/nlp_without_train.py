import spacy

# Создаем пустую модель русского языка и добавляем EntityRuler
nlp = spacy.blank("ru")
ruler = nlp.add_pipe("entity_ruler")

# Добавляем расширенные паттерны для отладки. 
patterns = [
    {"label": "DATE", "pattern": [{"TEXT": {"REGEX": r"\d{2}\.\d{2}\.\d{4}"}}]},
    {"label": "CITY", "pattern": [{"LOWER": "г."}, {"OP": "+"}]},
    {"label": "AREA", "pattern": [{"TEXT": {"REGEX": r".+область"}}]},
    {"label": "FULLNAME", "pattern": [{"IS_TITLE": True}, {"IS_TITLE": True}, {"IS_TITLE": True}]},
    {"label": "DOCUMENT_NAME", "pattern": [{"LOWER": {"IN": ["ст.", "статья"]}}, {"IS_DIGIT": True},
                                           {"LOWER": "п."}, {"IS_DIGIT": True}, {"LOWER": {"IN": ["надпись", "исполнительная"]}}]},
    {"label": "DOCUMENT_NUMBER", "pattern": [{"TEXT": "№"}, {"TEXT": {"REGEX": r"\d+"}}]},
    {"label": "DOCUMENT_DATE", "pattern": [{"LOWER": "от"}, {"TEXT": {"REGEX": r"\d{2}\.\d{2}\.\d{4}"}}]},
    {"label": "REQUIREMENT", "pattern": [{"LOWER": "о"}, {"LOWER": "взыскании"}, {"OP": "+"}]},
    {"label": "CLAIMANT", "pattern": [{"LOWER": "взыскатель"}, {"OP": "+"}]},
    {"label": "DEBTOR", "pattern": [{"LOWER": "должник"}, {"OP": "+"}]},
    {"label": "RECEIPT_DATE", "pattern": [{"LOWER": "поступившего"}, {"TEXT": {"REGEX": r"\d{2}\.\d{2}\.\d{4}"}}]},
    {"label": "ISSUING_AUTHORITY", "pattern": [{"LOWER": "из"}, {"OP": "+"}]},
    {"label": "STREET", "pattern": [{"LOWER": {"IN": ["ул.", "улица"]}}, {"OP": "+"}]},
    {"label": "DISTRICT", "pattern": [{"LOWER": "округа"}, {"OP": "+"}]}
]

ruler.add_patterns(patterns)

text = (
    """ПОСТАНОВЛЕНИЕ
о возбуждении исполнительного производства
12.03.2023	г. Алматы Алматинская область
Частный судебный исполнитель исполнительного округа Алматинского округа Алматинская область, г. Алматы, ул. Мусрепов 8, Иванов Иван Иванович рассмотрев Ст. 9. Перечень исполнительных документов п. 11-1. исполнительная надпись; №424356789 от  года о взыскании 150000 тенге (взыскатель ТОО "КазКредит" 53467809887587,  должник Разов Тимофей Дмитриевич 345456789) поступившего 13.03.2023 года из Суд города Алматы
УСТАНОВИЛ:
Исполнительный документ соответствует установленным законом требованиям,
предъявляемым к исполнительным документам.
Срок предъявления исполнительного документа не истек.
На основании изложенного, руководствуясь пунктом 1 статьи 10, пунктом 4 статьи 37,
статьей 126 Закона Республики Казахстан от 2 апреля 2010 года "Об исполнительном
производстве и статусе судебных исполнителей"
ПОСТАНОВИЛ:
1. Возбудить исполнительное производство.
2. Исполнительному производству присвоить №234567890.
3. Предупредить
Разов Тимофей Дмитриевич об административной и уголовной
ответственности за неисполнение исполнительного документа путем направления
уведомления.
4. О принятом решении сообщить сторонам исполнительного производства или их
представителям.
5. Постановление судебного исполнителя вступает в силу со дня его вынесения,
подлежит обязательному исполнению и может быть обжаловано в соответствии с
Административным процедурно-процессуальным кодексом Республики Казахстан.
Иск на действия (бездействие) судебного исполнителя по исполнению
исполнительных документов подается в суд в течение десяти рабочих дней со дня
совершения действия (отказа в совершении действия) или со дня, когда взыскателю
или должнику, не извещенному о времени и месте совершения действия судебным
исполнителем, стало о нем известно
Частный судебный исполнитель	Иванов Иван Иванович

Место печати (подпись, фамилия, инициалы

"""
)

doc = nlp(text)

# Вывод всех распознанных сущностей и их меток
for ent in doc.ents:
    print(f"{ent.label_}: {ent.text}")

